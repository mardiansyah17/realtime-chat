generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id          Int           @id @default(autoincrement())
  name        String        @db.VarChar(50)
  email       String        @unique @db.VarChar(70)
  picture     String        @db.VarChar(255)
  conversations_one Conversation[] @relation("conversations_one")
  conversations_two Conversation[] @relation("conversations_two")
messages Message[]
  
  @@map("users")
}

model Conversation{
  id Int @id @default(autoincrement())
user_one Int
user_id_one User @relation("conversations_one",fields: [user_one],references: [id])
user_two Int
user_id_two User @relation("conversations_two",fields: [user_two],references: [id])
messages Message[]
@@map("conversations")
}
model Message{
  id Int @id @default(autoincrement())
  content String @db.Text()
  sender Int
  sender_id User @relation(fields: [id],references: [id])
  conversation Int
  conversation_id Conversation @relation(fields: [conversation],references: [id])
  @@map("messages")
}